# Center Row

## BC customizations

Customizations are not active by default. Activate them in the site's theme settings under **Use BCDH customizations**.

Whenever possible we've minimized the amount of PHP in views and moved it to custom helper functions instead. This makes
it easier to understand the HTML layout of pages and easier to understand the logic of view functions.

### Styles

Custom styles can be added in one of two ways:

* Add CSS to the backend with the Edit CSS module.
* Directly add custom CSS to *asset/css/local-no-sass.css*.
* If you are set up to write SASS, edit or add *asset/sass/\*.local.scss* files.

### Views

We've added custom views:

#### *common/show-selector*

The *omeka/item/show.phtml* view now selects an appropriate item view to show from the *common/show-selector* directory
based on item metadata (type, collection, etc.).

| View | Description |
| ---  | ---         |
| *show-default.phtml* | default item page |
| *show-book.phtml* | item page for books |
| *show-map.phtml* | item page for maps |
| *show-no-media.phtml* | item page for items with no media |
| *single-metadata-field.phtml* | partial for a single metadata field |

### Helper functions

We've added new helper functions to make it easier to write and read partials:

| Helper | Description |
| ---    | ---         |
| `DHGetLabel()` | returns the appropriate label for a value |
| `DHSingleMetadataField()` | returns HTML to display a single metadata field |
| `DHAddStylesheets()` | adds a list of stylesheets to the current render |
| `DHAddScripts()` | adds a lis of scripts to the current page |
| `DHSelectShowPage()` | selects a show item page based on page metadata |

## Applying customizations to a different theme

To add these customizations to a different theme, follow the steps below. If a directory with a matching name doesn't
exist in the new theme, create it.

1. Make sure the following directories exist in the new theme. Create them if they do not already exist:
   * _asset/css_
   * _helper_
   * _view/common/show-selector_
   * _view/common/block-layout_
   * _view/layout_
   * _view/omeka/site/item_
2. Copy the contents of the _helper/_ directory to the new theme's _helper/_ directory.
3. Copy the contents of _view/common/show-selector/_ directory to the new theme's _view/common/show-selector_ directory.
4. Copy the two sections labeled "BCDH Customizations" in the _config/theme.ini_ to the new theme's _config/theme.ini_
   directory.
5. Copy the _view/common/block-layout/browse-preview-custom.phtml_ file to the new theme's _view/common/block-layout/_
   directory.
6. Update the new theme's _view/omeka/site/item/show.phtml_ and _show-original.phtml_ files:

    * If the new theme doesn't have a _view/omeka/site/item/show.phtml_ file, copy the _view/omeka/site/item/show.phtml_ and _
      view/omeka/site/item/show-original.phtml_ files into the new theme's _view/omeka/site/item/_ directory.
    * If the new theme does have a _view/omeka/site/item/show.phtml_ file, rename it _how-original.phtml_ and copy **only**
      the _view/omeka/site/item/show.phtml_ file into the new theme's _view/omeka/site/item/_ directory.
7. Copy the _asset/css/style.local.css_ and _asset/css/local-no-sass.css_ files to the new theme's _asset/css_
   directory.
8. Edit the new theme's _view/layout/layout.phtml_ and add the following code immediately below where the stylesheets
   are loaded:
    ```php
   $this->headLink()->appendStylesheet($this->assetUrl('css/style.local.css')); // Local CSS generated by SASS
   $this->headLink()->appendStylesheet($this->assetUrl('css/local-no-sass.css')); // Local plain-jane CSS
    ```
9. In the backend, go to the site's theme page, click **Edit Theme Settings**, check the **Use BCDH customizations**
   box, and save the settings.
10. If you want to use the custom browse block, activate it in the site's Pages settings.

You see the customizations now.

## Copyright

Center Row is Copyright Â© 2016-present Corporation for Digital Scholarship, Vienna, Virginia,
USA http://digitalscholar.org

The Corporation for Digital Scholarship distributes the Omeka source code under the GNU General Public License, version
3 (GPLv3). The full text of this license is given in the license file.

The Omeka name is a registered trademark of the Corporation for Digital Scholarship.

Third-party copyright in this distribution is noted where applicable.

All rights not expressly granted are reserved.
